set(APIGEAR_VERSION 3.7.0)
@PACKAGE_INIT@

set(APIGEAR_BUILD_WITH_OLINK @APIGEAR_BUILD_WITH_OLINK@)
set(APIGEAR_BUILD_WITH_MONITOR @APIGEAR_BUILD_WITH_MONITOR@)
set(APIGEAR_BUILD_WITH_MQTT @APIGEAR_BUILD_WITH_MQTT@)
set(APIGEAR_BUILD_WITH_NATS @APIGEAR_BUILD_WITH_NATS@)

# make sure we have all needed dependencies
include(CMakeFindDependencyMacro)
if(APIGEAR_BUILD_WITH_OLINK OR APIGEAR_BUILD_WITH_MONITOR)
find_dependency(Poco COMPONENTS Foundation Net Util REQUIRED)
endif()
if(APIGEAR_BUILD_WITH_OLINK)
find_dependency(olink_core REQUIRED)
endif()
if(APIGEAR_BUILD_WITH_MQTT)
find_dependency(eclipse-paho-mqtt-c COMPONENTS paho-mqtt3as-static REQUIRED)
# needed for paho-c, should be forwarded implicitly but is not
find_dependency(OpenSSL REQUIRED)
endif()
if(APIGEAR_BUILD_WITH_NATS)
find_dependency(cnats COMPONENTS nats_static REQUIRED)
endif()
if(APIGEAR_BUILD_WITH_OLINK OR APIGEAR_BUILD_WITH_MONITOR OR APIGEAR_BUILD_WITH_MQTT OR APIGEAR_BUILD_WITH_NATS)
find_dependency(nlohmann_json REQUIRED)
endif()

INCLUDE("${CMAKE_CURRENT_LIST_DIR}/ApiGearUtilitiesTargets.cmake")
if(APIGEAR_BUILD_WITH_OLINK)
INCLUDE("${CMAKE_CURRENT_LIST_DIR}/ApiGearPocoOlinkTargets.cmake")
endif()
if(APIGEAR_BUILD_WITH_MONITOR)
INCLUDE("${CMAKE_CURRENT_LIST_DIR}/ApiGearPocoTracerTargets.cmake")
endif()
if(APIGEAR_BUILD_WITH_MQTT)
INCLUDE("${CMAKE_CURRENT_LIST_DIR}/ApiGearPahoMQTTTargets.cmake")
endif()
if(APIGEAR_BUILD_WITH_NATS)
INCLUDE("${CMAKE_CURRENT_LIST_DIR}/ApiGearNatsTargets.cmake")
endif()

check_required_components(utilities)
if(APIGEAR_BUILD_WITH_MONITOR)
check_required_components(poco-tracer)
endif()
if(APIGEAR_BUILD_WITH_OLINK)
check_required_components(poco-olink)
endif()
if(APIGEAR_BUILD_WITH_MQTT)
check_required_components(paho-mqtt)
endif()
if(APIGEAR_BUILD_WITH_NATS)
check_required_components(nats)
endif()
